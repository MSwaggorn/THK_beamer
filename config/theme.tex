% -------------------- theme configuration -------------------- %

\usetheme{default}
\usecolortheme{default}
\setbeamertemplate{navigation symbols}{}  % hide navigation symbols

% --- colored bar at top of slides --- %
\newlength{\thkwhitewidth}
\newlength{\thkcolorwidth}

\setbeamertemplate{headline}{%
    \leavevmode%
    \setlength{\thkwhitewidth}{1cm}%
    \setlength{\thkcolorwidth}{\paperwidth}%
    \addtolength{\thkcolorwidth}{-\thkwhitewidth}%
    \setlength{\thkcolorwidth}{0.333\thkcolorwidth}%
    \hbox{%
        \begin{beamercolorbox}[wd=\thkwhitewidth,ht=3pt,dp=0pt]{white section}%
        \end{beamercolorbox}%
        \begin{beamercolorbox}[wd=\thkcolorwidth,ht=3pt,dp=0pt]{red section}%
        \end{beamercolorbox}%
        \begin{beamercolorbox}[wd=\thkcolorwidth,ht=3pt,dp=0pt]{orange section}%
        \end{beamercolorbox}%
        \begin{beamercolorbox}[wd=\thkcolorwidth,ht=3pt,dp=0pt]{purple section}%
        \end{beamercolorbox}%
    }%
}

\setbeamercolor{white section}{bg=white}
\setbeamercolor{red section}{bg=THRed}
\setbeamercolor{orange section}{bg=THOrange}
\setbeamercolor{purple section}{bg=THPurple}

% --- footer colors --- %
\setbeamercolor{footline white}{bg=white}
\setbeamercolor{footline separator}{bg=black}
\setbeamercolor{footline left}{fg=black,bg=white}
\setbeamercolor{footline middle}{fg=black,bg=white}
\setbeamercolor{footline right}{fg=black,bg=white}

% --- title page layout --- %
\newcommand{\titleimage}{\titleimagevar}

\setbeamertemplate{title page}{%
    \vspace{-0.2cm}
    {\transparent{0.9}\includegraphics[width=\dimexpr\paperwidth-1cm\relax,height=8cm,keepaspectratio]{\titleimage}}%
    \vspace{0.5cm}
    \par
    \begingroup
        \begin{beamercolorbox}[wd=\textwidth,left]{title}
            {\usebeamerfont{title}\inserttitle}\par%
            \ifx\insertsubtitle\@empty%
            \else%
                \vskip0.3em%
                {\usebeamerfont{subtitle}\insertsubtitle\par}%
            \fi%
        \end{beamercolorbox}%
    \endgroup
    \vfill
}

\setbeamerfont{title}{size=\titlesize,series=\bfseries}
\setbeamerfont{subtitle}{size=\subtitlesize}
\setbeamerfont{author}{size=\normalsize}
\setbeamerfont{institute}{size=\small}
\setbeamerfont{date}{size=\small}
\setbeamercolor{title}{fg=black}
\setbeamercolor{subtitle}{fg=black}

% --- slide headings --- %
\setbeamertemplate{frametitle}{%
    \vskip0.37cm
    \begin{beamercolorbox}[wd=\textwidth]{frametitle}%
        {\usebeamerfont{frametitle}\textbf{\insertframetitle}}%
    \end{beamercolorbox}
    \vskip0.2cm
}

\setbeamercolor{frametitle}{fg=black,bg=white}

% --- bullet lists (itemize) --- %
% four levels with different colors: black, red, orange, purple

\setbeamertemplate{itemize item}{\large\textbullet}
\setbeamertemplate{itemize subitem}{\large\textbullet}
\setbeamertemplate{itemize subsubitem}{\large\textbullet}
\setbeamertemplate{itemize subsubsubitem}{\large\textbullet}

\setbeamercolor{itemize item}{fg=black}
\setbeamercolor{itemize subitem}{fg=THRed}
\setbeamercolor{itemize subsubitem}{fg=THOrange}
\setbeamercolor{itemize subsubsubitem}{fg=THPurple}

\setlistdepth{4}
\renewlist{itemize}{itemize}{4}

\setlist[itemize,1]{label={\raisebox{-0.24ex}{\color{black}\large\textbullet}}, leftmargin=*, itemsep=0.55em, partopsep=0pt}
\setlist[itemize,2]{label={\raisebox{-0.24ex}{\color{THRed}\large\textbullet}}, leftmargin=1.2em}
\setlist[itemize,3]{label={\raisebox{-0.24ex}{\color{THOrange}\large\textbullet}}, leftmargin=1.2em}
\setlist[itemize,4]{label={\raisebox{-0.24ex}{\color{THPurple}\large\textbullet}}, leftmargin=1em}

\setbeamerfont{itemize/enumerate body}{size=\normaltextsize}
\setbeamerfont{itemize/enumerate subbody}{size=\normaltextsize}
\setbeamerfont{itemize/enumerate subsubbody}{size=\normaltextsize}

\let\olditem\item
\renewcommand{\item}{\olditem\vspace{0.1ex}}

% --- general appearance --- %
\setbeamercolor{background canvas}{bg=white}
\setbeamercolor{normal text}{fg=black,bg=white}

% enable figure and table numbering
\setbeamertemplate{caption}[numbered]
\setbeamerfont{caption}{size=\captionsizetext}
\setbeamerfont{caption name}{size=\captionsizetext,series=\bfseries}
\setbeamercolor{caption name}{fg=black}

% --- footer layout --- %
\makeatletter
\defbeamertemplate*{footline}{myfootline}
{
    \leavevmode%
    \vbox to 0pt{%
      \vskip-10ex%
      \hbox{%
        \begin{beamercolorbox}[wd=1cm,ht=0.25pt,dp=0pt]{footline white}%
        \end{beamercolorbox}%
        \begin{beamercolorbox}[wd=\dimexpr\paperwidth-1cm\relax,ht=0.25pt,dp=0pt]{footline separator}%
        \end{beamercolorbox}%
      }%
      \vskip1pt%
      \hbox{%
        \hspace{1cm}%
        % left: date and page number
        \begin{beamercolorbox}[wd=0.15\paperwidth,ht=3ex,dp=1ex,left]{footline left}%
            \parbox[t]{0.5\paperwidth}{\footnotesmallsize\raggedright
            \footnotesmallsize\presentationdate \\
            \vspace{3ex}
            Seite \insertframenumber%
            }
        \end{beamercolorbox}%
        % middle: title and author info
        \begin{beamercolorbox}[wd=0.6\paperwidth,ht=3ex,dp=1ex,left]{footline middle}%
            \parbox[t]{0.6\paperwidth}{\footnotesmallsize\raggedright
            \textbf{\presentationtitle} -- \presentationsubtitle\\
            \vspace{1ex}
            \authorname\\
            \name, \namesecond}%
        \end{beamercolorbox}%
        % right: university logo
        \begin{beamercolorbox}[wd=0.18\paperwidth,ht=3ex,dp=1ex,right,rightskip=0.3cm]{footline right}%
            \raisebox{-4.8ex}{\includegraphics[height=7ex]{\universitylogo}}%
        \end{beamercolorbox}%
      }%
      \vss%
    }%
}
\makeatother

\setbeamertemplate{footline}[myfootline]

% --- bibliography styling --- %
\setbeamercolor{bibliography entry author}{fg=black}
\setbeamercolor{bibliography entry title}{fg=black}
\setbeamercolor{bibliography entry location}{fg=black}
\setbeamercolor{bibliography entry note}{fg=black}
\setbeamercolor{bibliography item}{fg=black}

\setbeamerfont{bibliography entry author}{size=\normaltextsize}
\setbeamerfont{bibliography entry title}{size=\normaltextsize}
\setbeamerfont{bibliography entry location}{size=\normaltextsize}
\setbeamerfont{bibliography entry note}{size=\normaltextsize}
\setbeamerfont{bibliography item}{size=\normaltextsize}

% --- table of contents styling --- %
\setbeamercolor{section in toc}{fg=black}
\setbeamercolor{subsection in toc}{fg=black}
\setbeamercolor{subsubsection in toc}{fg=black}

\setbeamerfont{section in toc}{series=\bfseries}

\setbeamertemplate{section in toc}[sections numbered]
\setbeamertemplate{subsection in toc}{%
  \leavevmode\leftskip=1.5em\usebeamercolor[fg]{subsection in toc}%
  \usebeamerfont{subsection in toc}\inserttocsectionnumber.\inserttocsubsectionnumber\hspace{0.5em}\inserttocsubsection\par
}
\setbeamertemplate{subsubsection in toc}{%
  \leavevmode\leftskip=3em\usebeamercolor[fg]{subsubsection in toc}%
  \usebeamerfont{subsubsection in toc}\inserttocsectionnumber.\inserttocsubsectionnumber.\inserttocsubsubsectionnumber\hspace{0.5em}\inserttocsubsubsection\par
}
